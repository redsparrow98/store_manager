{% extends "base.html" %}
{% block title %}Users{% endblock %}
{% block content %}

<div class="inventory-header">
    <h1 class="tittle">Users</h1>

    <div class="account-actions">
        <a class="btn btn-users" href="{{ url_for('account_page')}}">Back to my account</a>
    </div>

    <!-- Messages field -->
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
        {% for category, message in messages %}
            {{ message }}
        {% endfor %}
    {% endif %} {% endwith %}
</div>

<!-- Main table of users -->
<div class="table-wrap">
    <table class="products-table">
        <thead>
            <tr>
                <th>Username</th>
                <th>Name</th>
                <th>Access level</th>
                <th>Action</th>
            </tr>
        </thead>
        
        <!-- Lists all the users in the users dataset -->
        <tbody>
            {% if users %}
                {% for username, user in users.items() %}
                    <tr>
                        <td>{{ username }}</td>
                        <td>{{ user["name"] }}</td>
                        <td>{{ user["access_level"] }}</td>
                        <td>
                            <!-- Edit the user button -->
                            <a class="icon-btn" href="{{ url_for('edit_user') }}?username={{ username }}" title="Edit">
                                <img src="{{ url_for('static', filename='images/edit.svg') }}" alt="Edit">
                            </a>
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                    <tr>
                        <td colspan="7">No users found.</td>
                    </tr>
            {% endif %}
        </tbody>
    </table>
</div>

{% endblock %}